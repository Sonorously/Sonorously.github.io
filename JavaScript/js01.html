<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS骚操作 | Bingo&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.095ec9e1.css" as="style"><link rel="preload" href="/assets/js/app.6915ac72.js" as="script"><link rel="preload" href="/assets/js/2.02048ae3.js" as="script"><link rel="preload" href="/assets/js/10.4121c805.js" as="script"><link rel="prefetch" href="/assets/js/11.e973adad.js"><link rel="prefetch" href="/assets/js/12.09bec661.js"><link rel="prefetch" href="/assets/js/13.ff4ab35b.js"><link rel="prefetch" href="/assets/js/14.9b21b380.js"><link rel="prefetch" href="/assets/js/15.868b816e.js"><link rel="prefetch" href="/assets/js/3.9588d92c.js"><link rel="prefetch" href="/assets/js/4.cb452700.js"><link rel="prefetch" href="/assets/js/5.98b15a22.js"><link rel="prefetch" href="/assets/js/6.0b3b252e.js"><link rel="prefetch" href="/assets/js/7.f2e891ff.js"><link rel="prefetch" href="/assets/js/8.a302776e.js"><link rel="prefetch" href="/assets/js/9.19aab9f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.095ec9e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Bingo's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://bingo.kim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bingo.kim
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://bingo.kim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bingo.kim
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/home.html" class="sidebar-link">这个是A页面</a></li><li><a href="/JavaScript/b.html" class="sidebar-link">这个是B页面</a></li><li><a href="/JavaScript/Diff.html" class="sidebar-link">Diff算法</a></li><li><a href="/JavaScript/js01.html" aria-current="page" class="active sidebar-link">JS骚操作</a></li><li><a href="/JavaScript/js02.html" class="sidebar-link">关于 JavaScript 数据类型，有哪些你不知道的细节？</a></li><li><a href="/JavaScript/js03.html" class="sidebar-link">JS高阶函数</a></li><li><a href="/JavaScript/js04.html" class="sidebar-link">字符串常用方法</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>markdown</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js骚操作"><a href="#js骚操作" class="header-anchor">#</a> JS骚操作</h1> <p>js中一些简化操作</p> <h3 id="数组去重"><a href="#数组去重" class="header-anchor">#</a> 数组去重</h3> <p><strong>双重for循环去重</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function unique(arr){
    for(let i=0;i &lt; arr.length; i++){
        for(let j=i+1;j &lt; arr.length;j++){
            if(arr[i] === arr[j]){
                arr[j].splice(j,1);
                j--;
            }
        }
    }
    return arr
}
</code></pre></div><p><strong>利用indexOf去重</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function unique(arr){
    let newArray = []
    for(let i=0;i&lt;arr.length;i++){
        if( newArray.indexOf(arr[i]) === -1 ){
            newArray.push(arr[i])
        }
    }
    return newArray;
}
</code></pre></div><p><strong>使用Array.from()和new Set()去重</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function unique(arr){
    return Array.from(new Set(arr));
}
</code></pre></div><h3 id="数组转为对象"><a href="#数组转为对象" class="header-anchor">#</a> 数组转为对象</h3> <div class="language- extra-class"><pre class="language-text"><code>let arr = [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;];
/* 常见处理 */
let obj = {};
for (let key in arr) {
    obj[key] = arr[key];
}
/* 精简类型 */
let obj = {...arrr}
</code></pre></div><h3 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//string串转number</span>
<span class="token function">Number</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>
<span class="token operator">+</span>string
<span class="token comment">//number转string</span>
<span class="token function">String</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
number <span class="token operator">+</span> <span class="token string">''</span>

</code></pre></div><h3 id="性能追踪"><a href="#性能追踪" class="header-anchor">#</a> 性能追踪</h3> <p><strong>如果想测试一段代码的执行耗时，可以尝试使用performance</strong></p> <div class="language- extra-class"><pre class="language-text"><code>let start = performance.now();
let sum = 0;
for(let i=0;i&lt;10000;i++){
	sum+=i;
}
let end = performance.now();
console.log(start)
console.log(end)
</code></pre></div><h3 id="对象合并"><a href="#对象合并" class="header-anchor">#</a> 对象合并</h3> <div class="language- extra-class"><pre class="language-text"><code>let obj1 = {a:1}
let obj1 = {b:2}
//assgin合并方法
Object.assign(obj1,obj2)
//展开操作符合并方法
let con = {...obj1,...obj2}
</code></pre></div><h3 id="短路运算"><a href="#短路运算" class="header-anchor">#</a> 短路运算</h3> <p>**我们可以通过  &amp;&amp; 和 || 来简化我们的代码 **</p> <div class="language- extra-class"><pre class="language-text"><code>if(ok){
	search();
}

//使用&amp;&amp;
ok &amp;&amp; search();
//使用||
let name = null || 'hellow'
</code></pre></div><h3 id="数组扁平化"><a href="#数组扁平化" class="header-anchor">#</a> 数组扁平化</h3> <div class="language- extra-class"><pre class="language-text"><code>let arr = [1, [2, [3, 4]]];

//递归实现
function flatten(arr){
	if(Array.isArray(arr)){
		return new Error('传入的值不是数组');
	}
	let result = []; 
	for(let i=0;i&lt;arr.length;i++){
		if(Array.isArray(arr[i])){
			result = result.concat(flatten(arr[i]));
		}else{
			result.push(arr[i])
		}
	}
	return result;
}

//reduce方法实现
function flatten(arr) {
  return arr.reduce(function (prev, next) {
    return prev.concat(Array.isArray(next) ? flatten(next) : next);
  }, []);
}

//简易方法实现 flat(deep) deep是展开嵌套数组的深度
arr.flat(3)
</code></pre></div><h3 id="求幂运算"><a href="#求幂运算" class="header-anchor">#</a> 求幂运算</h3> <p>比如实现$2^{10}$，使用JS编写：</p> <div class="language- extra-class"><pre class="language-text"><code>//Math.pow(底数,幂数)
let num = Math.pow(2,10);
//es7添加了指数运算符号 **
let num = 2 ** 10;
</code></pre></div><h3 id="浮点数转整数"><a href="#浮点数转整数" class="header-anchor">#</a> 浮点数转整数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//向上取整，直接去掉所有的小数</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//向下取整，只要是有小数就 +1</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//四舍五入</span>

<span class="token comment">//位运算符 ~~,&gt;&gt;,&lt;&lt;,| 都可以对负数取整   &gt;&gt;&gt;不可对负数取整 都是实现Math.flooor()的功能</span>
<span class="token operator">~</span><span class="token operator">~</span><span class="token number">6.95</span>     <span class="token comment">//6</span>
<span class="token number">6.95</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span>  <span class="token comment">//6</span>
<span class="token number">6.95</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span>  <span class="token comment">//6</span>
<span class="token number">6.95</span> <span class="token operator">|</span> <span class="token number">0</span>   <span class="token comment">//6</span>
<span class="token number">6.95</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span> <span class="token comment">//6</span>
<span class="token operator">~</span><span class="token number">6.95</span>      <span class="token comment">//-7 实现了类似Math.ceil()的功能，但是会转成负数</span>

</code></pre></div><h3 id="获取数组的最后一项"><a href="#获取数组的最后一项" class="header-anchor">#</a> 获取数组的最后一项</h3> <div class="language- extra-class"><pre class="language-text"><code>arr[arr.length - 1];
let last = arr.slice(-1)[0];
</code></pre></div><h3 id="object-create-null-和"><a href="#object-create-null-和" class="header-anchor">#</a> Object.create(null) 和 {}</h3> <div class="language- extra-class"><pre class="language-text"><code>//Object.create(proto,[propertiesObject]) proto是新创建对象的原型，propertiesObject是自身添加的可枚举的属性
let obj = Object.create(null,{
	a:{
		writable:true,
		configurable:true,
		value:&quot;1&quot;
	}
})

区别：
通过{}创建的对象继承了Object自身的方法，如hasOwnProperty、toString等，在新对象上可以直接使用。

而使用Object.create(null)创建的对象，除了自身属性a之外，原型链上没有任何属性。
也就是我们可以通过Object.create(null)这种方式创建一个纯净的对象，我们可以自己定义hasOwnProperty、toString等方法，完全不必担心会将原型链上的同名方法覆盖掉。

</code></pre></div><h3 id="数组拷贝"><a href="#数组拷贝" class="header-anchor">#</a> 数组拷贝</h3> <div class="language- extra-class"><pre class="language-text"><code>let copyArr = arr.slice()
let copyArr = [...arr]
let copyArr = new Array(...arr)
let copyArr = arr.concat()

</code></pre></div><h3 id="避免多条件并列"><a href="#避免多条件并列" class="header-anchor">#</a> 避免多条件并列</h3> <div class="language- extra-class"><pre class="language-text"><code>if (status === 'process' || status === 'wait' || status === 'fail') {
  doSomething()
}

//switch case 
switch(status) {
  case 'process':
  case 'wait':
  case 'fail':
    doSomething()
}

//includes
const enum = ['process', 'wait', 'fail']
if (enum.includes(status)) {
  doSomething()
}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/Diff.html" class="prev">
        Diff算法
      </a></span> <span class="next"><a href="/JavaScript/js02.html">
        关于 JavaScript 数据类型，有哪些你不知道的细节？
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6915ac72.js" defer></script><script src="/assets/js/2.02048ae3.js" defer></script><script src="/assets/js/10.4121c805.js" defer></script>
  </body>
</html>
