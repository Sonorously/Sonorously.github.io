<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于 JavaScript 数据类型，有哪些你不知道的细节？ | Bingo&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.095ec9e1.css" as="style"><link rel="preload" href="/assets/js/app.6915ac72.js" as="script"><link rel="preload" href="/assets/js/2.02048ae3.js" as="script"><link rel="preload" href="/assets/js/11.e973adad.js" as="script"><link rel="prefetch" href="/assets/js/10.4121c805.js"><link rel="prefetch" href="/assets/js/12.09bec661.js"><link rel="prefetch" href="/assets/js/13.ff4ab35b.js"><link rel="prefetch" href="/assets/js/14.9b21b380.js"><link rel="prefetch" href="/assets/js/15.868b816e.js"><link rel="prefetch" href="/assets/js/3.9588d92c.js"><link rel="prefetch" href="/assets/js/4.cb452700.js"><link rel="prefetch" href="/assets/js/5.98b15a22.js"><link rel="prefetch" href="/assets/js/6.0b3b252e.js"><link rel="prefetch" href="/assets/js/7.f2e891ff.js"><link rel="prefetch" href="/assets/js/8.a302776e.js"><link rel="prefetch" href="/assets/js/9.19aab9f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.095ec9e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Bingo's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://bingo.kim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bingo.kim
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://bingo.kim" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bingo.kim
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/home.html" class="sidebar-link">这个是A页面</a></li><li><a href="/JavaScript/b.html" class="sidebar-link">这个是B页面</a></li><li><a href="/JavaScript/Diff.html" class="sidebar-link">Diff算法</a></li><li><a href="/JavaScript/js01.html" class="sidebar-link">JS骚操作</a></li><li><a href="/JavaScript/js02.html" aria-current="page" class="active sidebar-link">关于 JavaScript 数据类型，有哪些你不知道的细节？</a></li><li><a href="/JavaScript/js03.html" class="sidebar-link">JS高阶函数</a></li><li><a href="/JavaScript/js04.html" class="sidebar-link">字符串常用方法</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>markdown</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="关于-javascript-数据类型-有哪些你不知道的细节"><a href="#关于-javascript-数据类型-有哪些你不知道的细节" class="header-anchor">#</a> 关于 JavaScript 数据类型，有哪些你不知道的细节？</h1> <p>大家好，今天我们再来看点基础知识，看看JavaScript数据类型中的一些细节。</p> <p>数据类型是计算机语言的基础知识，数据类型广泛用于变量、函数参数、表达式、函数返回值等场合。JavaScript 规定了八种数据类型：未定义（Undefined）、空（Null）、数字（Number）、字符串（String）、布尔值（Boolean）、符号（Symbol）、任意大整数（BigInt）、对象（Object）。</p> <h2 id="一、数据存储"><a href="#一、数据存储" class="header-anchor">#</a> 一、数据存储</h2> <p>下面我们就先来看看 JavaScript 中的数据是如何存储的。</p> <h3 id="_1-语言类型"><a href="#_1-语言类型" class="header-anchor">#</a> 1. 语言类型</h3> <p>说到JavaScript的数据存储机制，首先我们需要知道，JavaScript 究竟是什么类型的语言？</p> <p>一般情况下可以根据声明变量的特点，将语言分为静态语言和动态语言：</p> <ul><li><strong>静态语言：</strong> 在使用之前就需要确认其变量数据类型的称为静态语言；</li> <li><strong>动态语言：</strong> 相反的，在运行过程中需要检查数据类型的语言称为动态语言。</li></ul> <p>很显然，JavaScript 就是一门动态语言，因为在声明变量之前并不需要确认其数据类型。</p> <p>对于一个变量，我们既可以给他设置为一个数字，也可以给他设置为一个字符串，还可以让字符串类型的变量和数值类型的变量相加。在这个过程中，可以发生隐式的类型转化。弱类型语言可以发生隐式类型转换，而强类型语言不能发生隐式类型转换。而JavaScript就是弱类型语言。</p> <p>现在我们知道了，JavaScript是一种弱类型、动态的语言。这就意味着，无需告诉JavaScript引擎变量是什么类型，JavaScript 引擎在运行代码时会自己计算出来。同时，我们可以使用同一个变量保存不同类型的数据。</p> <h3 id="_2-堆栈空间"><a href="#_2-堆栈空间" class="header-anchor">#</a> 2. 堆栈空间</h3> <p>对于 JavaScript 中的 8 种数据类型，其中前7种都是基础类型，最后1种是引用类型。</p> <p>这些数据主要存储在<strong>栈空间和堆空间</strong>中，下面来看看栈空间和堆空间的概念。</p> <p>下面来看一段代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;CUGGZ&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> d <span class="token operator">=</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
复制代码
</code></pre></div><p>当这段代码执行时，需要先进行编译，并创建执行上下文，最后在按照顺序执行代码。当执行到第三行时，调用栈执行状态如下：</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ecfd0209ffd3418e8fd482f5181baf14~tplv-k3u1fbpfcp-watermark.awebp" alt="未命名绘图.png"></p> <p>此时变量 a 和 b 的值都被保存在执行上下文中， 而执行上下文又被压入到了栈中，所以变量 a 和 b 的值都是存放在栈中 的。</p> <p>接下来继续执行后面的代码。当执行到第四行代码时，JavaScript 引擎判断变量 c 的值是一个引用类型，这时JavaScript 引擎会将该对象分配到堆空间里，分配后该对象会有一个在堆中的地址，然后再将该数据的地址写进 c 的变量值，最终分配好内存的执行上下文如下：</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0b2b879120b4793b2a28851f4f20c6c~tplv-k3u1fbpfcp-watermark.awebp" alt="未命名绘图1.png">可以看到，对象类型存储在堆空间中，在栈空间中只保留了对象的引用地址，当 JavaScript 访问该数据时，会通过栈中的引用地址来访问。</p> <p>所以，基本数据类型的值直接保存在栈中，引用类型的值会存放在堆中。</p> <p>那为什么要区分堆空间和栈空间呢？将数据都存在栈空间中不行吗？</p> <p>答案肯定是不可以的。JavaScript 引擎需要使用栈来维护程序执行期间上下文的状态，如果将所有数据都放在栈空间中，就会影响到上下文切换的效率，进而影响到整个程序的执行效率。</p> <p>所以，通常情况下，栈空间不会设置的很大，主要用来存放一些基本类型的小数据。由于引用类型的数据占用空间都比较大，所以这类数据会被存放到堆中，堆空间比较大，能存放很多较大的数据。</p> <p>最后，我们再看看上面实例代码中第五行，也就是将变量 c 赋值给变量 d 是怎么执行的。在 JavaScript 中，原始类型的赋值会完整复制变量值，而引用类型的赋值是复制引用地址。 所以d = c 的操作就是把 c 的引用地址赋值给 d，如下图所示：</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f562a0d2c234171aae8e8a98aabae17~tplv-k3u1fbpfcp-watermark.awebp" alt="未命名绘图2.png"></p> <p>可以看到，变量 c 和 d 都指向了同一个堆中的对象，当我们修改c的值时，d也会发生变化。</p> <h2 id="二、数据类型"><a href="#二、数据类型" class="header-anchor">#</a> 二、数据类型</h2> <p>说完JavaScript数据的存储方式，下面再来看看JavaScript中8种数据类型的一些细节，一些概念这里就不再提了。</p> <h3 id="_1-undefined"><a href="#_1-undefined" class="header-anchor">#</a> 1. Undefined</h3> <p>Undefined 类型表示<strong>未定义</strong>，它的类型只有一个值，就是 undefined。任何变量在赋值前是 Undefined 类型、值为 undefined，可以用全局变量 undefined 来表达这个值。可以通过以下方式来得到 undefined： （1）声明了一个变量，但没有赋值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> foo<span class="token punctuation">;</span> <span class="token comment">//undefined</span>
复制代码
</code></pre></div><p>（2）引用未定义的对象属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>b <span class="token comment">// undefined</span>
复制代码
</code></pre></div><p>（3）函数定义了形参，但没有传递实参</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>（4）执行 void 表达式；</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">void</span> <span class="token number">0</span> <span class="token comment">// undefined</span>
复制代码
</code></pre></div><p>推荐通过 void 表达式来得到 undefined 值，因为这种方式既简便又不需要引用额外的变量和属性；同时它作为表达式还可以配合三目运算符使用，代表不执行任何操作。</p> <p>如下面的代码就表示满足条件 x 大于 0 且小于 5 的时候执行函数 fn，否则不进行任何操作：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>x <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>那如何判断一个变量的值是否为 undefined 呢？可以通过 typeof 关键字获取变量 x 的类型，然后与 'undefined' 字符串做真值比较：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h3 id="_2-null"><a href="#_2-null" class="header-anchor">#</a> 2. Null</h3> <p>Null 数据类型和 Undefined 类似，只有一个值 null，表示变量被置为空对象，而非一个变量最原始的状态。null 是 JavaScript 保留关键字，而 undefined 只是一个常量。也就是说可以声明名称为 undefined 的变量，但将 null 作为变量使用时则会报错。</p> <p>对于null，还有一个比较关键的问题，来看代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token operator">==</span> <span class="token string">'object'</span> <span class="token comment">// true</span>
复制代码
</code></pre></div><p>实际上，null 有自己的类型 Null，而不属于Object类型，typeof 之所以会判定为 Object 类型，如下：</p> <p>在 JavaScript 第一个版本中，所有值都存储在 32 位的单元中，每个单元包含一个小的 <strong>类型标签(1-3 bits)</strong> 以及当前要存储值的真实数据。类型标签存储在每个单元的低位中，共有五种数据类型：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">000</span><span class="token operator">:</span> object   <span class="token operator">-</span> 当前存储的数据指向一个对象。
  <span class="token number">1</span><span class="token operator">:</span> int      <span class="token operator">-</span> 当前存储的数据是一个 <span class="token number">31</span> 位的有符号整数。
<span class="token number">010</span><span class="token operator">:</span> double   <span class="token operator">-</span> 当前存储的数据指向一个双精度的浮点数。
<span class="token number">100</span><span class="token operator">:</span> string   <span class="token operator">-</span> 当前存储的数据指向一个字符串。
<span class="token number">110</span><span class="token operator">:</span> boolean  <span class="token operator">-</span> 当前存储的数据是布尔值。
复制代码
</code></pre></div><p>如果最低位是 1，则类型标签标志位的长度只有一位；如果最低位是 0，则类型标签标志位的长度占三位，为存储其他四种数据类型提供了额外两个 bit 的长度。</p> <p>有两种特殊数据类型：</p> <ul><li>undefined的值是 (-2)30(一个超出整数范围的数字)；</li> <li>null 的值是机器码 NULL 指针(null 指针的值全是 0)。</li></ul> <p>那也就是说null的类型标签也是000，和Object的类型标签一样，所以会被判定为Object。</p> <p>可以通过另一种方法获取 null 的真实类型：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
复制代码
</code></pre></div><p>当然 undefined 类型也可以通过这种方式来获取：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
复制代码
</code></pre></div><p>当通过 “==” 来比较null 和 undefined 是否相等时，得到的结果是 true：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
复制代码
</code></pre></div><p>在 Javascript 规范中提到，<strong>要比较相等性之前，不能将 null 和 undefined 转换成其他任何值，并且规定null 和 undefined 是相等的</strong>。null 和 undefined都代表着无效的值。</p> <h3 id="_3-boolean"><a href="#_3-boolean" class="header-anchor">#</a> 3. Boolean</h3> <p>Boolean 数据类型只有两个值：true 和 false，分别代表真和假。很多时候我们需要将各种表达式和变量转换成 Boolean 数据类型来当作判断条件。</p> <p>下面是将星期数转换成中文的函数，比如输入数字 1，函数就会返回“星期一”，输入数字 2 会返回“星期二”，以此类推，如果未输入数字则返回 undefined：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getWeek</span><span class="token punctuation">(</span><span class="token parameter">week</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'日'</span><span class="token punctuation">,</span> <span class="token string">'一'</span><span class="token punctuation">,</span> <span class="token string">'二'</span><span class="token punctuation">,</span> <span class="token string">'三'</span><span class="token punctuation">,</span> <span class="token string">'四'</span><span class="token punctuation">,</span> <span class="token string">'五'</span><span class="token punctuation">,</span> <span class="token string">'六'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>week<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">星期</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dict<span class="token punctuation">[</span>week<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><p>这里在 if 语句中会进行类型转换，将 week 变量转换成 Boolean 数据类型，而 0、空字符串、null、undefined 在转换时都会返回 false。所以在输入 0 并不会返回“星期日”，而会返回 undefined。这是我们需要注意的问题。</p> <h3 id="_4-string"><a href="#_4-string" class="header-anchor">#</a> 4. String</h3> <p>String 用于表示字符串，String 有最大长度是 253 - 1，<strong>这个所谓的最大长度并不是指字符数，而是字符串的 UTF16 编码长度。</strong> 字符串的 charAt、charCodeAt、length 等方法针对的都是 UTF16 编码。所以，字符串的最大长度，实际上是受字符串的编码长度影响的。</p> <p>JavaScript 中的字符串是<strong>永远无法变更</strong>的，一旦构造出来，就无法用任何方式改变其内容，所以字符串具有值类型的特征。</p> <p>字符串的关键就在于它常用的那些方法了，这里不再多介绍。</p> <h3 id="_5-number"><a href="#_5-number" class="header-anchor">#</a> 5. Number</h3> <p>Number 类型表示数字。JavaScript 中的 Number 类型有 18437736874454810627(即 264-253+3) 个值。JavaScript 中的 Number 类型基本符合 IEEE 754-2008 规定的双精度浮点数规则，但是 JavaScript 为了表达几个额外的语言场景（比如为了不让除以 0 出错，而引入了无穷大的概念），规定了几个例外情况：</p> <ul><li><strong>NaN</strong>，占用了 9007199254740990，这原本是符合 IEEE 规则的数字，通常在计算失败时会得到该值。要判断一个变量是否为 NaN，则可以通过 Number.isNaN 函数进行判断。</li> <li><strong>Infinity</strong>，无穷大，在某些场景下比较有用，比如通过数值来表示权重或者优先级，Infinity 可以表示最高优先级或最大权重。</li> <li><strong>-Infinity</strong>，无穷小。</li></ul> <p>注意，JavaScript 中有 <code>+0</code> 和 <code>-0</code> 的概念，在加法类运算中它们没有区别，但是除法时需要特别注意。可以使用 1/x 是 Infinity 还是 -Infinity来区分 +0 和 -0。</p> <p>根据双精度浮点数的定义，Number 类型中有效的整数范围是 <code>-0x1fffffffffffff</code> 至 <code>0x1fffffffffffff</code>，所以 Number 无法精确表示此范围外的整数。根据浮点数的定义，非整数的 Number 类型无法用 <code>==</code> 或者 <code>===</code> 来比较，这也就是在 JavaScript 中为什么 <code>0.1+0.2 !== 0.3</code>。</p> <p>出现这种情况的原因在于计算的时候，JavaScript 引擎会先将十进制数转换为二进制，然后进行加法运算，再将所得结果转换为十进制。在进制转换过程中如果小数位是无限的，就会出现误差。</p> <p>实际上，这里错误的不是结果，而是比较的方法，正确的比较方法是使用 JavaScript 提供的最小精度值，检查等式左右两边差的绝对值是否小于最小精度：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">-</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
复制代码
</code></pre></div><h3 id="_6-symbol"><a href="#_6-symbol" class="header-anchor">#</a> 6. Symbol</h3> <p>Symbol 是 ES6 中引入的新数据类型，它表示一个唯一的常量，通过 Symbol 函数来创建对应的数据类型，创建时可以添加变量描述，该变量描述在传入时会被强行转换成字符串进行存储：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span>description <span class="token operator">===</span> b<span class="token punctuation">.</span>description <span class="token comment">// true</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span>description <span class="token comment">// [object Object]</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
d <span class="token operator">==</span> a <span class="token comment">// false</span>
复制代码
</code></pre></div><p>基于以上特性，Symbol 属性类型比较适合用于两类场景中：<strong>常量值和对象属性</strong>。</p> <h4 id="_1-避免常量值重复"><a href="#_1-避免常量值重复" class="header-anchor">#</a> （1）避免常量值重复</h4> <p>getValue 函数会根据传入字符串参数 key 执行对应代码逻辑：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'A'</span><span class="token operator">:</span>
      <span class="token operator">...</span>
    <span class="token keyword">case</span> <span class="token string">'B'</span><span class="token operator">:</span>
      <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>这段代码对调用者而言非常不友好，因为代码中使用了魔术字符串（Magic string，指的是在代码之中多次出现、与代码形成强耦合的某一个具体的字符串或者数值），导致调用 getValue 函数时需要查看函数代码才能找到参数 key 的可选值。所以可以将参数 key 的值以常量的方式声明：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">KEY</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  alibaba<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  baidu<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">KEY</span><span class="token punctuation">.</span>alibaba<span class="token operator">:</span>
      <span class="token operator">...</span>
    <span class="token keyword">case</span> <span class="token constant">KEY</span><span class="token punctuation">.</span>baidu<span class="token operator">:</span>
      <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">getValue</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">.</span>baidu<span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>但这样也并非完美，假设现在要在 KEY 常量中加入一个 key，根据对应的规则，很有可能会出现值重复的情况：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">KEY</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  alibaba<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  baidu<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span>
  tencent<span class="token operator">:</span> <span class="token string">'B'</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><p>这就会出现问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">.</span>baidu<span class="token punctuation">)</span> <span class="token comment">// 等同于 getValue(KEY.tencent)</span>
复制代码
</code></pre></div><p>所以在这种场景下更适合使用 Symbol，不需要关心值本身，只关心值的唯一性：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">KEY</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  alibaba<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  baidu<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  tencent<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h4 id="_2-避免对象属性覆盖"><a href="#_2-避免对象属性覆盖" class="header-anchor">#</a> （2）避免对象属性覆盖</h4> <p>函数 fn 需要对传入的对象参数添加一个临时属性 user，但可能该对象参数中已经有这个属性了，如果直接赋值就会覆盖之前的值。此时就可以使用 Symbol 来避免这个问题。创建一个 Symbol 数据类型的变量，然后将该变量作为对象参数的属性进行赋值和读取，这样就能避免覆盖的情况：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// {user: {id: xx, name: yy}}</span>
  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  o<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'zzz'</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h3 id="_7-bigint"><a href="#_7-bigint" class="header-anchor">#</a> 7. BigInt</h3> <p>BigInt 可以表示任意大的整数。其语法如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">BigInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>其中 value 是创建对象的数值。可以是字符串或者整数。</p> <p>在 JavaScript 中，Number 基本类型可以精确表示的最大整数是253。因此早期会有这样的问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> max <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>    <span class="token comment">// 最大安全整数</span>

<span class="token keyword">let</span> max1 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">1</span>
<span class="token keyword">let</span> max2 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">2</span>

max1 <span class="token operator">===</span> max2   <span class="token comment">// true</span>
复制代码
</code></pre></div><p>有了BigInt之后，这个问题就不复存在了：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> max1 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">1n</span>
<span class="token keyword">let</span> max2 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">2n</span>

max1 <span class="token operator">===</span> max2   <span class="token comment">// false</span>
复制代码
</code></pre></div><p>可以通过typeof操作符来判断变量是否为BigInt类型（返回字符串&quot;bigint&quot;）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token number">1n</span> <span class="token operator">===</span> <span class="token string">'bigint'</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
<span class="token keyword">typeof</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'bigint'</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
复制代码
</code></pre></div><p>还可以通过<code>Object.prototype.toString</code>方法来判断变量是否为BigInt类型（返回字符串&quot;[object BigInt]&quot;）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">10n</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object BigInt]'</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
复制代码
</code></pre></div><p>注意，BigInt 和 Number 不是严格相等的，但是宽松相等：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">10n</span> <span class="token operator">===</span> <span class="token number">10</span> <span class="token comment">// false </span>
<span class="token number">10n</span> <span class="token operator">==</span> <span class="token number">10</span>  <span class="token comment">// true </span>
复制代码
</code></pre></div><p>Number 和 BigInt 可以进行比较：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1n</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// true </span>
<span class="token number">2n</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// true </span>
<span class="token number">2</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token comment">// false </span>
<span class="token number">2n</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// false </span>
<span class="token number">2n</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
复制代码
</code></pre></div><h3 id="_8-object"><a href="#_8-object" class="header-anchor">#</a> 8. Object</h3> <p>Object 是 JavaScript 中最复杂的类型，它表示对象。在 JavaScript 中，对象的定义是属性的集合。简单地说，Object 类型数据就是键值对的集合，键是一个字符串（或者 Symbol） ，值可以是任意类型的值； 复杂地说，Object 又包括很多子类型，比如 Date、Array、Set、RegExp。</p> <p>其实，JavaScript的几个基本数据类型在对象类型中都有一个对应的类：</p> <ul><li>Number；</li> <li>String；</li> <li>Boolean；</li> <li>Symbol。</li></ul> <p>对于 Number 类，1 与 new Number(1) 是完全不同的值，一个是 Number 类型， 一个是对象类型。Number、String 和 Boolean 构造器是两用的：当跟 new 搭配时，它们产生对象；当直接调用时，它们表示强制类型转换。Symbol 函数比较特殊，直接用 new 调用它会抛出错误，但它仍然是 Symbol 对象的构造器。</p> <p>对于Object类型，有一种很常见的操作，那就是<strong>深拷贝，</strong> 这里不再多介绍，可以参考文章：<a href="https://juejin.cn/post/7003514213658263588" target="_blank" rel="noopener noreferrer">《如何实现一个深浅拷贝？》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="三、类型转换"><a href="#三、类型转换" class="header-anchor">#</a> 三、类型转换</h2> <p>上面提到了，JavaScript是一门弱类型语言，在执行时可能会发生类型转化，那最后我们就来看看数据之间的类型准换规则。</p> <h3 id="_1-stringtonumber"><a href="#_1-stringtonumber" class="header-anchor">#</a> 1. StringToNumber</h3> <p>Number 和 String 之间的相互转换应该是比较复杂的，将字符串转化为数字的方法很多，比如Number()、parseInt()、parseFloat()。</p> <p>字符串到数字的类型转换，存在一个语法结构，类型转换支持十进制、二进制、八进制和十六进制，比如：</p> <ul><li>30；</li> <li>0b111；</li> <li>0o13；</li> <li>0xFF。</li></ul> <p>此外，JavaScript 支持的字符串语法还包括正负号科学计数法，可以使用大写或者小写的 e 来表示：</p> <ul><li>1e3；</li> <li>-1e-2。</li></ul> <p>需要注意，parseInt 和 parseFloat 并不使用这个转换：</p> <ul><li>在不传入第二个参数的情况下，parseInt 只支持 16 进制前缀“0x”，而且会忽略非数字字符，也不支持科学计数法。所以在任何环境下，都建议传入 parseInt 的第二个参数，</li> <li>parseFloat 则直接把原字符串作为十进制来解析，它不会引入任何的其他进制。</li></ul> <p>所以，在多数情况下，Number 是比 parseInt 和 parseFloat 更好的选择。</p> <h3 id="_2-装箱转换"><a href="#_2-装箱转换" class="header-anchor">#</a> 2. 装箱转换</h3> <p>上面提到，Number、String、Boolean、Symbol 基本类型在对象中都有对应的类，<strong>所谓装箱转换，就是把基本类型转换为对应的对象</strong>。</p> <p>我们知道，全局的 Symbol 函数无法使用 new 来调用，但仍可以利用装箱机制来得到一个 Symbol 对象，可以利用一个函数的 call 方法来强迫产生装箱。定义一个函数，函数里面只有 <code>return this</code>，然后调用函数的 call 方法到一个 Symbol 类型的值上，这样就会产生一个 <code>symbolObject</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token keyword">let</span> symbolObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> symbolObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>symbolObject <span class="token keyword">instanceof</span> <span class="token class-name">Symbol</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>symbolObject<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Symbol<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
复制代码
</code></pre></div><p>可以看到，它的 type of 值是 object；使用 symbolObject instanceof 可以看到，它是 Symbol 这个类的实例；它的 constructor 也是等于 Symbol 的。所以，它就是 Symbol 装箱过的对象。<strong>装箱机制会频繁产生临时对象，在一些对性能要求较高的场景下，应该尽量避免对基本类型做装箱转换。</strong></p> <p>可以使用JavaScript中内置的 Object 函数显式调用装箱能力。每一类装箱对象皆有私有的 Class 属性，这些属性可以用 <code>Object.prototype.toString</code> 获取：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> symbolObject <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> symbolObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>symbolObject <span class="token keyword">instanceof</span> <span class="token class-name">Symbol</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>symbolObject<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Symbol<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>symbolObject<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object Symbol]</span>
复制代码
</code></pre></div><p>在 JavaScript 中，没有任何方法可以更改私有的 Class 属性，因此 <code>Object.prototype.toString</code> 是可以准确识别对象对应的基本类型的方法，它比 <code>instanceof</code> 更加准确。但需要注意的是，call 本身会产生装箱操作，所以需要配合 typeof 来区分基本类型还是对象类型。</p> <h3 id="_3-封箱转换"><a href="#_3-封箱转换" class="header-anchor">#</a> 3. 封箱转换</h3> <p>在 JavaScript 标准中，规定了 ToPrimitive 函数，它是对象类型到基本类型的转换（即拆箱转换）。</p> <p>对象到 String 和 Number 的转换都遵循“先拆箱再转换”的规则。通过拆箱转换，把对象变成基本类型，再从基本类型转换为对应的 String 或者 Number。拆箱转换会尝试调用 valueOf 和 toString 来获得拆箱后的基本类型。如果 valueOf 和 toString 都不存在，或者没有返回基本类型，则会产生类型错误 TypeError：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;valueOf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj <span class="token operator">*</span> <span class="token number">2</span>
<span class="token comment">// valueOf</span>
<span class="token comment">// toString</span>
<span class="token comment">// Uncaught TypeError: Cannot convert object to primitive value</span>
复制代码
</code></pre></div><p>这里定义了一个对象 obj，obj 有 valueOf 和 toString 两个方法，这两个方法都返回一个对象，然后进行 <code>obj*2</code> 这个运算时，先执行了 valueOf，接下来是 toString，最后抛出了一个 TypeError，这就说明了这个拆箱转换失败了。到 String 的拆箱转换会优先调用 toString。把刚才的运算从 obj*2 换成 String(obj)，调用顺序就变了：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;valueOf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token comment">// toString</span>
<span class="token comment">// valueOf</span>
<span class="token comment">// Uncaught TypeError: Cannot convert object to primitive va</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/js01.html" class="prev">
        JS骚操作
      </a></span> <span class="next"><a href="/JavaScript/js03.html">
        JS高阶函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6915ac72.js" defer></script><script src="/assets/js/2.02048ae3.js" defer></script><script src="/assets/js/11.e973adad.js" defer></script>
  </body>
</html>
